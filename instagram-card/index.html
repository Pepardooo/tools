<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Manual IG Profile Card</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/html-to-image"></script>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    label span { font-size: 12px; color: rgb(100 116 139); }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    input[type="number"] { appearance: textfield; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen flex items-center justify-center p-6">
  <div class="w-full max-w-4xl">
    <header class="mb-6">
      <h1 class="text-2xl md:text-3xl font-extrabold tracking-tight">Manual Instagram Profile Card</h1>
      <p class="text-slate-600 mt-1">Type the details and upload a picture. The preview updates live and you can export it as a PNG.</p>
    </header>

    <div class="grid md:grid-cols-2 gap-6 items-start">
      <!-- Controls -->
      <section class="bg-white rounded-3xl shadow p-5 border border-slate-100">
        <div class="grid grid-cols-1 gap-4">
          <div>
            <label class="block font-semibold mb-1">Display name</label>
            <input id="in-name" class="w-full px-3 py-2 rounded-xl border border-slate-200" placeholder="e.g., Pedro Rodriguez" />
          </div>
          <div>
            <label class="block font-semibold mb-1">Username <span>(no @)</span></label>
            <input id="in-handle" class="w-full px-3 py-2 rounded-xl border border-slate-200" placeholder="e.g., pedro" />
          </div>
          <div class="grid grid-cols-3 gap-3">
            <div>
              <label class="block font-semibold mb-1">Posts</label>
              <input id="in-posts" type="number" min="0" class="w-full px-3 py-2 rounded-xl border border-slate-200" placeholder="0" />
            </div>
            <div>
              <label class="block font-semibold mb-1">Followers</label>
              <input id="in-followers" type="number" min="0" class="w-full px-3 py-2 rounded-xl border border-slate-200" placeholder="0" />
            </div>
            <div>
              <label class="block font-semibold mb-1">Following</label>
              <input id="in-following" type="number" min="0" class="w-full px-3 py-2 rounded-xl border border-slate-200" placeholder="0" />
            </div>
          </div>
          <div>
            <label class="block font-semibold mb-1">Profile image</label>
            <input id="in-file" type="file" accept="image/*" class="w-full text-sm" />
          </div>
          <div class="flex items-center justify-between pt-2">
            <div class="flex items-center gap-3">
              <label class="text-sm font-semibold">Card size</label>
              <select id="in-size" class="px-3 py-2 rounded-xl border border-slate-200 text-sm">
                <option value="16:9">16:9 (YouTube)</option>
                <option value="1:1">1:1 (Square)</option>
                <option value="9:16">9:16 (Story)</option>
              </select>
            </div>
            <button id="downloadBtn" class="px-4 py-2 rounded-xl bg-slate-900 text-white text-sm font-semibold disabled:opacity-40" disabled>Download PNG</button>
          </div>
        </div>
      </section>

      <!-- Preview Card -->
      <section class="bg-white rounded-3xl shadow-xl p-6 border border-slate-100">
        <h2 class="font-bold text-lg mb-4">Preview</h2>
        <div id="card-wrap" class="flex items-center justify-center">
          <div id="card" class="w-[540px] aspect-[16/9] bg-gradient-to-br from-indigo-50 to-white border border-slate-200 rounded-3xl p-6 flex">
            <div class="m-auto w-full flex items-center gap-5">
              <div class="w-24 h-24 rounded-full bg-slate-200 overflow-hidden border border-slate-300 shadow-inner shrink-0">
                <img id="avatar" src="" alt="avatar" class="w-full h-full object-cover hidden"/>
              </div>
              <div class="flex-1 min-w-0">
                <p id="name" class="text-2xl font-extrabold tracking-tight truncate">Your Name</p>
                <p id="handle" class="text-slate-600 truncate">@username</p>
                <div class="mt-3 flex items-center gap-6 text-slate-700 font-semibold">
                  <div><span id="stat-posts">0</span> <span class="text-slate-500 font-normal">posts</span></div>
                  <div><span id="stat-followers">0</span> <span class="text-slate-500 font-normal">followers</span></div>
                  <div><span id="stat-following">0</span> <span class="text-slate-500 font-normal">following</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <p class="text-xs text-slate-500 mt-4">Tip: numbers will auto-format with separators. You can switch card size with the dropdown.</p>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    const inName = $('in-name');
    const inHandle = $('in-handle');
    const inPosts = $('in-posts');
    const inFollowers = $('in-followers');
    const inFollowing = $('in-following');
    const inFile = $('in-file');
    const inSize = $('in-size');

    const nameEl = $('name');
    const handleEl = $('handle');
    const postsEl = $('stat-posts');
    const followersEl = $('stat-followers');
    const followingEl = $('stat-following');
    const avatarEl = $('avatar');
    const card = $('card');
    const downloadBtn = $('downloadBtn');

    const nf = new Intl.NumberFormat();

    function updateText() {
      nameEl.textContent = inName.value.trim() || 'Your Name';
      handleEl.textContent = '@' + (inHandle.value.trim().replace(/^@+/, '') || 'username');
      postsEl.textContent = nf.format(Number(inPosts.value || 0));
      followersEl.textContent = nf.format(Number(inFollowers.value || 0));
      followingEl.textContent = nf.format(Number(inFollowing.value || 0));
    }

    function setAspect(v) {
      const map = { '16:9': 'aspect-[16/9]', '1:1': 'aspect-square', '9:16': 'aspect-[9/16]' };
      card.classList.remove('aspect-[16/9]', 'aspect-square', 'aspect-[9/16]');
      card.classList.add(map[v] || 'aspect-[16/9]');
    }

    // Live bindings
    [inName, inHandle, inPosts, inFollowers, inFollowing].forEach(el => el.addEventListener('input', updateText));
    inSize.addEventListener('change', () => setAspect(inSize.value));

    inFile.addEventListener('change', () => {
      const f = inFile.files?.[0];
      if (!f) return;
      const reader = new FileReader();
      reader.onload = () => {
        avatarEl.src = reader.result;
        avatarEl.classList.remove('hidden');
        downloadBtn.disabled = false;
      };
      reader.readAsDataURL(f);
    });

    // Export
    downloadBtn.addEventListener('click', async () => {
      try {
        downloadBtn.disabled = true;
        const dataUrl = await htmlToImage.toPng(card, { pixelRatio: 2 });
        const a = document.createElement('a');
        const user = inHandle.value.trim().replace(/^@+/, '') || 'profile';
        a.href = dataUrl;
        a.download = `${user}-card.png`;
        a.click();
      } catch (e) {
        alert('Could not export image: ' + (e.message || e));
      } finally {
        downloadBtn.disabled = false;
      }
    });

    // Init
    updateText();
  </script>
</body>
</html>
